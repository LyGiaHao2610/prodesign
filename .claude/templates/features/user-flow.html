<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Flow: {{FEATURE_NAME}}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        .mermaid {
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-6xl mx-auto p-8">
        <!-- Header -->
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900">User Flow: {{FEATURE_NAME}}</h1>
            <p class="text-gray-600 mt-2">Version {{VERSION}} | C·∫≠p nh·∫≠t: {{DATE}}</p>
        </header>

        <!-- Legend -->
        <div class="bg-white rounded-lg shadow p-4 mb-8">
            <h2 class="font-semibold text-gray-700 mb-3">Ch√∫ th√≠ch</h2>
            <div class="flex flex-wrap gap-4 text-sm">
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded bg-blue-500"></div>
                    <span>User Action</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded bg-green-500"></div>
                    <span>Success</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded bg-red-500"></div>
                    <span>Error</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded bg-yellow-500"></div>
                    <span>Decision</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded bg-purple-500"></div>
                    <span>System Process</span>
                </div>
            </div>
        </div>

        <!-- Main Flow -->
        <section class="bg-white rounded-lg shadow p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Main Flow (Happy Path)</h2>
            <div class="mermaid">
flowchart TD
    A[üöÄ Entry Point] --> B[Step 1: {{STEP_1}}]
    B --> C[Step 2: {{STEP_2}}]
    C --> D{Decision Point}
    D -->|Yes| E[Step 3a: {{STEP_3A}}]
    D -->|No| F[Step 3b: {{STEP_3B}}]
    E --> G[‚úÖ Success]
    F --> G

    style A fill:#3B82F6,color:#fff
    style G fill:#10B981,color:#fff
    style D fill:#F59E0B,color:#fff
            </div>
        </section>

        <!-- Error Flows -->
        <section class="bg-white rounded-lg shadow p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Error Flows</h2>
            <div class="mermaid">
flowchart TD
    A[User Action] --> B{Validate}
    B -->|Valid| C[Process]
    B -->|Invalid| D[‚ùå Show Error]
    D --> E{Recoverable?}
    E -->|Yes| F[Show Retry Option]
    F --> A
    E -->|No| G[Show Error Dialog]
    G --> H[Exit Flow]
    C --> I[‚úÖ Success]

    style D fill:#EF4444,color:#fff
    style G fill:#EF4444,color:#fff
    style I fill:#10B981,color:#fff
            </div>
        </section>

        <!-- UI States -->
        <section class="bg-white rounded-lg shadow p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">UI States Flow</h2>
            <div class="mermaid">
stateDiagram-v2
    [*] --> Idle
    Idle --> Loading: User Action
    Loading --> Success: API Success
    Loading --> Error: API Error
    Success --> Idle: Auto dismiss (3s)
    Error --> Idle: User dismiss
    Error --> Loading: Retry
            </div>
        </section>

        <!-- Detailed Steps -->
        <section class="bg-white rounded-lg shadow p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Chi ti·∫øt t·ª´ng b∆∞·ªõc</h2>

            <div class="space-y-4">
                <!-- Step 1 -->
                <div class="border-l-4 border-blue-500 pl-4 py-2">
                    <h3 class="font-semibold text-gray-800">Step 1: {{STEP_1}}</h3>
                    <p class="text-gray-600 text-sm mt-1">{{STEP_1_DESCRIPTION}}</p>
                    <div class="flex gap-2 mt-2">
                        <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">User Action</span>
                        <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded">{{UI_ELEMENT_1}}</span>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="border-l-4 border-blue-500 pl-4 py-2">
                    <h3 class="font-semibold text-gray-800">Step 2: {{STEP_2}}</h3>
                    <p class="text-gray-600 text-sm mt-1">{{STEP_2_DESCRIPTION}}</p>
                    <div class="flex gap-2 mt-2">
                        <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">System</span>
                        <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded">{{UI_ELEMENT_2}}</span>
                    </div>
                </div>

                <!-- Decision -->
                <div class="border-l-4 border-yellow-500 pl-4 py-2">
                    <h3 class="font-semibold text-gray-800">Decision: {{DECISION}}</h3>
                    <p class="text-gray-600 text-sm mt-1">{{DECISION_DESCRIPTION}}</p>
                    <div class="flex gap-2 mt-2">
                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Yes ‚Üí {{PATH_YES}}</span>
                        <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded">No ‚Üí {{PATH_NO}}</span>
                    </div>
                </div>

                <!-- Success -->
                <div class="border-l-4 border-green-500 pl-4 py-2">
                    <h3 class="font-semibold text-gray-800">Success State</h3>
                    <p class="text-gray-600 text-sm mt-1">{{SUCCESS_DESCRIPTION}}</p>
                    <div class="flex gap-2 mt-2">
                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Toast/Dialog</span>
                        <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded">Auto-dismiss 3s</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Edge Cases -->
        <section class="bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Edge Cases</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-2 text-left">Case</th>
                            <th class="px-4 py-2 text-left">ƒêi·ªÅu ki·ªán</th>
                            <th class="px-4 py-2 text-left">UI Response</th>
                            <th class="px-4 py-2 text-left">H√†nh ƒë·ªông ti·∫øp</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y">
                        <tr>
                            <td class="px-4 py-2">{{EDGE_CASE_1}}</td>
                            <td class="px-4 py-2">{{CONDITION_1}}</td>
                            <td class="px-4 py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">{{UI_1}}</span></td>
                            <td class="px-4 py-2">{{ACTION_1}}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2">{{EDGE_CASE_2}}</td>
                            <td class="px-4 py-2">{{CONDITION_2}}</td>
                            <td class="px-4 py-2"><span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded">{{UI_2}}</span></td>
                            <td class="px-4 py-2">{{ACTION_2}}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2">{{EDGE_CASE_3}}</td>
                            <td class="px-4 py-2">{{CONDITION_3}}</td>
                            <td class="px-4 py-2"><span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">{{UI_3}}</span></td>
                            <td class="px-4 py-2">{{ACTION_3}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Footer -->
        <footer class="mt-8 text-center text-gray-500 text-sm">
            <p>Generated for {{PRODUCT_NAME}} | {{DATE}}</p>
        </footer>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
